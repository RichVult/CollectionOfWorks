<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='user_dashboard.css') }}">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var profilePic = document.getElementById('profilePic');
            var dropdown = document.getElementById('profileDropdown');
            var menu = document.getElementById('profileDropdownMenu');
            if (profilePic && dropdown && menu) {
                profilePic.onclick = function(e) {
                    e.stopPropagation();
                    menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
                };
                document.addEventListener('click', function() {
                    menu.style.display = 'none';
                });
            }
        });
    </script>
</head>
<body style="background:#f7f8fa;">
    <div class="topbar">
        <div class="topbar-content">
            <span class="welcome-user">Welcome back, {{ user.name }}</span>
            <div class="profile-dropdown" id="profileDropdown">
                <img src="{{ url_for('static', filename='default_profile.png') }}" alt="Profile Picture" class="profile-pic" id="profilePic">
                <div class="profile-dropdown-menu" id="profileDropdownMenu">
                    <a href="{{ url_for('views.profile') }}">Edit Profile</a>
                    <a href="{{ url_for('views.logout') }}">Logout</a>
                </div>
            </div>
        </div>
    </div>
    <div class="sidebar">
        <div style="display:flex;align-items:center;flex-direction:column;margin-bottom:32px;">
            <img src="{{ url_for('static', filename='marist.jpeg') }}" alt="Marist Logo" style="width:48px;height:48px;border-radius:12px;margin-bottom:8px;">
            <span style="font-size:1.25rem;font-weight:700;color:#b31b1b;letter-spacing:1px;">Marist CMS</span>
        </div>
        <ul>
            <li><a href="#" class="active">Dashboard</a></li>
            <li><a href="{{ url_for('views.contacts') }}">Contacts</a></li>
            <li><a href="{{ url_for('views.messages') }}">Messages <span style="color:#b31b1b;font-weight:700;">5</span></a></li>
        </ul>
    </div>
    <div class="main-content">
        <h1 style="margin-top:0;">Dashboard</h1>
        <div class="dashboard-row">
            <div class="dashboard-main">
                <div class="dashboard-cards">
                    <div class="dashboard-card">
                        <h2>1,482</h2>
                        <p>Total Contacts</p>
                    </div>
                    <div class="dashboard-card">
                        <h2>64</h2>
                        <p>Messages</p>
                    </div>
                    <div class="dashboard-card">
                        <h2>29</h2>
                        <p>Favorites</p>
                    </div>
                </div>
                <div class="recent-activity">
                    <h3>Recent Activity</h3>
                    <ul class="activity-list">
                        <li><img src="{{ user.profile_pic }}"><div><b>Sarah Johnson</b> added as a new contact<br><span style="color:#888;font-size:0.95rem;">2 hours ago</span></div></li>
                        <li><img src="{{ user.profile_pic }}"><div>Message sent to <b>Mike Peters</b><br><span style="color:#888;font-size:0.95rem;">5 hours ago</span></div></li>
                        <li><img src="{{ user.profile_pic }}"><div>Contact details updated for <b>David Kim</b><br><span style="color:#888;font-size:0.95rem;">Yesterday</span></div></li>
                    </ul>
                </div>
            </div>
            <div class="dashboard-side">
                <div class="quick-actions">
                    <h3>Quick Actions</h3>
                    <div class="quick-actions-grid">
                        <a href="{{ url_for('views.contacts') }}?add=1" class="quick-action-btn">Add Contact</a>
                        <a href="{{ url_for('views.messages') }}" class="quick-action-btn">Send Message</a>
                        <button class="quick-action-btn">Export Contacts</button>
                        <a href="{{ url_for('views.profile') }}" class="quick-action-btn">Settings</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 